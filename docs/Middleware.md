//TODO add documentation for middleware